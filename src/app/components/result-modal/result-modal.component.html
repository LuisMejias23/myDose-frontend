<div class="fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full flex items-center justify-center z-50" (click)="closeModal()">
  <div class="p-8 max-w-lg mx-auto bg-white rounded-xl shadow-lg relative" (click)="$event.stopPropagation()">
    <button (click)="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-900 text-2xl font-bold">&times;</button>
    
   @if (recommendations() && recommendations().length > 0) {
     <h3 class="text-2xl font-bold text-gray-800 mb-4">Medication Recommendations:</h3>
      <div *ngFor="let rec of recommendations()" class="mb-4 p-4 border border-gray-200 rounded-lg shadow-sm bg-gray-50">
        <h4 class="text-xl font-semibold text-blue-600">{{ rec.name }}</h4>
        <p class="text-gray-700 mt-2"><strong>Dose:</strong> {{ rec.dose }}</p>
        <p class="text-gray-600 mt-1"><strong>Notes:</strong> {{ rec.recommendations }}</p>
      </div>
   }
     
@if (recommendations() && recommendations().length === 0) {
   <div class="p-4 bg-yellow-100 text-yellow-800 rounded-lg">
      <p class="font-semibold text-center">No suitable medication found for this patient.</p>
    </div>
}
   
@if (shareUrl()) {
   <div class="mt-6 border-t pt-4">
      <p class="font-semibold text-gray-700 text-center mb-4">Share this recommendation with the patient:</p>
      <div class="flex flex-col space-y-2">
        <button (click)="shareOnWhatsApp()" class="flex items-center justify-center p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
          <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Icon" class="w-5 h-5 mr-2"> Share on WhatsApp
        </button>
        <button (click)="shareOnEmail()" class="flex items-center justify-center p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
          <img src="https://upload.wikimedia.org/wikipedia/commons/7/7b/Email_icon_%28grey%29.svg" alt="Email Icon" class="w-5 h-5 mr-2"> Share via Email
        </button>
        <button (click)="copyToClipboard()" class="flex items-center justify-center p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
          <img src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Copy_icon.svg" alt="Copy Icon" class="w-5 h-5 mr-2"> Copy Link
        </button>
      </div>
    </div>
}
   
  </div>
</div>